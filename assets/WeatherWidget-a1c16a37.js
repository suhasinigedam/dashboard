import{j as e,r as u,a as b}from"./index-d20691cd.js";import{u as w,a as j}from"./hook-2bf103b7.js";import{u as k,C as y,D as v,c as S,S as M,r as N,a as C}from"./sortable.esm-70d485dd.js";const D=({city:r})=>{var n;const{attributes:a,listeners:i,setNodeRef:d,transform:c,transition:x}=k({id:r.name}),s={transform:y.Transform.toString(c),transition:x};return e.jsxs("div",{ref:d,style:s,...a,...i,className:"dark:bg-gray-900 dark:text-white bg-white text-black rounded border border-gray-300 shadow p-4 cursor-grab w-full max-w-[320px]",children:[e.jsx("div",{...i,className:"relative top-2 right-2 cursor-grab text-gray-400 hover:text-gray-600","aria-label":"Drag handle",role:"button",tabIndex:0,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7h1M4 12h1M4 17h1M9 7h1M9 12h1M9 17h1M14 7h1M14 12h1M14 17h1M19 7h1M19 12h1M19 17h1"})})}),e.jsx("p",{className:"dark:text-white text-black font-semibold",children:r.name}),e.jsx("p",{className:"dark:text-white text-black",children:(n=r.weather[0])==null?void 0:n.description}),e.jsxs("p",{className:"dark:text-white text-black",children:["Temperature: ",r.main.temp," Â°C"]}),e.jsxs("p",{className:"dark:text-white text-black",children:["Humidity: ",r.main.humidity," %"]})]})},A=()=>{const r=w(),{data:a,loading:i,error:d}=j(t=>t.weather),[c,x]=u.useState(""),[s,n]=u.useState([]),l=u.useRef(null);u.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{r(b(c))},500),()=>{l.current&&clearTimeout(l.current)}),[c,r]),u.useEffect(()=>{Array.isArray(a)&&a.length>0?n(a.map(t=>t.name)):n([])},[a]);const g=t=>{const{active:o,over:h}=t;h&&o.id!==h.id&&n(m=>{const p=m.indexOf(o.id),f=m.indexOf(h.id);return C(m,p,f)})};return e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search city...",value:c,onChange:t=>x(t.target.value),className:"dark:bg-gray-900 dark:text-gray-300 bg-white text-black mb-4 w-full max-w-md px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),i&&e.jsx("p",{children:"Loading weather data..."}),d&&e.jsx("p",{className:"text-red-500",children:d}),s.length>0&&e.jsx(v,{collisionDetection:S,onDragEnd:g,children:e.jsx(M,{items:s,strategy:N,children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:s.map(t=>{const o=a.find(h=>h.name===t);return o?e.jsx(D,{city:o},o.id):null})})})}),!i&&s.length===0&&!d&&e.jsx("p",{className:"text-gray-500",children:"No city selected or found"})]})};export{A as default};
