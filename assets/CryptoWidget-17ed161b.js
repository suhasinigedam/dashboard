import{j as e,r as o,f as w}from"./index-d20691cd.js";import{u as S,a as v}from"./hook-2bf103b7.js";import{u as k,C as M,D as N,c as C,S as D,r as E,a as _}from"./sortable.esm-70d485dd.js";const R=({coin:r})=>{const{attributes:c,listeners:i,setNodeRef:h,transform:x,transition:u}=k({id:r.id}),s={transform:M.Transform.toString(x),transition:u};return e.jsxs("div",{ref:h,style:s,...c,...i,className:"dark:bg-gray-900 dark:text-white bg-white text-black rounded border border-gray-300 shadow p-4 cursor-grab w-full max-w-[320px]",children:[e.jsx("div",{...i,className:"relative top-2 right-2 cursor-grab text-gray-400 hover:text-gray-600","aria-label":"Drag handle",role:"button",tabIndex:0,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7h1M4 12h1M4 17h1M9 7h1M9 12h1M9 17h1M14 7h1M14 12h1M14 17h1M19 7h1M19 12h1M19 17h1"})})}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-6 h-6"}),e.jsx("h3",{className:"dark:text-white text-black font-bold",children:r.name})]}),e.jsxs("p",{className:"dark:text-white text-black",children:["Price: $",r.current_price.toLocaleString()]}),e.jsxs("p",{className:r.price_change_percentage_24h>=0?"text-green-600":"text-red-500",children:["24h: ",r.price_change_percentage_24h.toFixed(2),"%"]})]})},L=()=>{const r=S(),{data:c,loading:i,error:h}=v(t=>t.crypto),[x,u]=o.useState([]),[s,m]=o.useState(""),[f,d]=o.useState(null),l=o.useRef(null);o.useEffect(()=>{r(w())},[r]),o.useEffect(()=>{c.length>0&&!s&&(u(c.map(t=>t.id)),d(null))},[c,s]),o.useEffect(()=>{if(l.current&&clearTimeout(l.current),s.trim()===""){d(null);return}return l.current=setTimeout(()=>{fetch(`https://api.coingecko.com/api/v3/search?query=${encodeURIComponent(s)}`).then(t=>t.json()).then(t=>{if(t.coins&&Array.isArray(t.coins)){const a=t.coins.map(n=>n.id);d(a)}else d([])}).catch(()=>{d([])})},500),()=>{l.current&&clearTimeout(l.current)}},[s]);const p=f??x,b=t=>{const{active:a,over:n}=t;n&&a.id!==n.id&&u(g=>{const j=g.indexOf(a.id),y=g.indexOf(n.id);return _(g,j,y)})};return e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search cryptocurrencies...",value:s,onChange:t=>m(t.target.value),className:"dark:bg-gray-900 dark:text-gray-300 bg-white text-black mb-4 w-full max-w-md px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),i&&e.jsx("p",{children:"Loading crypto data..."}),h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx(N,{collisionDetection:C,onDragEnd:b,children:e.jsx(D,{items:p,strategy:E,children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[p.length===0&&!i&&e.jsx("p",{children:"No results found."}),p.map(t=>{const a=c.find(n=>n.id===t);return a?e.jsx(R,{coin:a},a.id):null})]})})})]})};export{L as default};
